<!--Register page template-->
{% extends 'root/base.html' %}
{% load static %}

{% block title %} Register a new user {% endblock %}

{% block maincontent %}


<div class="container-fluid">
    <div class="mep-form_wrapper">

        <div class="elements-space-between">
            <h3>User Registration</h3> 
            <div></div>
        </div>

        <ul class="sub-tabs">
            <li data-tab-target="#basic_data_tab" class="sub-tab active">
                <div class="sub-tab-link">
                    <i class="fas fa-info-circle"></i><span> Basic Data</span>
                </div>
            </li>
            <li data-tab-target="#org_data_tab" class="sub-tab">
                <div class="sub-tab-link">
                    <i class="fas fa-sitemap"></i><span> Organizational Information</span>
                </div>
            </li>
            <li data-tab-target="#buisness_doc_tab" class="sub-tab">
                <div class="sub-tab-link">
                    <i class="fas fa-file-alt"></i><span> Business Document</span>
                </div>
            </li>
        </ul>

        <div class="tab-content">
            <div id="basic_data_tab" data-tab-content class="active">
                <div class="mt-3">

                    <!-- Display the success message upon successful registration--> 
                    <div>
                        {% if messages %}
                        <div class="alert alert-success">
                            {% for message in messages %}
                            <div class="{{ message.tags }}">{{ message }}</div>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <form method="POST" id="user_register_forms">
                        {% csrf_token %}

                        <!-- Display the eror messages during registration -->
                        {% if reg_form.errors %}
                        <div class="alert alert-danger">
                            {% for field in reg_form %}
                                {% if field.errors %}
                                {{ field.label }}: {{ field.errors|striptags }} <br>
                                {% endif %}
                            {% endfor%}
                        </div>
                        {% endif %}

                        <div class="d-flex justify-content-end">
                            <div>
                                <button class="btn btn-primary" type="submit" title="Click here to Register" id="user_registration_submit"><i class="fas fa-check"></i> register</button>
                            </div>
                        </div>
                        

                        <div class="card card-shadow-1 mt-3">
                            
                            <div class="card-body">
                                <h5 class="card-title">Basic Data</h5>
                                <div class="row">
                                    <div class="form-group col-md">
                                        <label>User Name:</label><span class="hg_required"></span><br>
                                        {{ reg_form.username }}
                                    </div>
                                    <div class="form-group col-md">
                                        <label>Employee Id:</label><span class="hg_required"></span><br>
                                        {{ reg_form.employee_id }}
                                    </div>
                                    <div class="form-group col-md">
                                        <label>User Type:</label><span class="hg_required"></span><br>
                                        {{ reg_form.user_type }}
                                    </div>
                                    
                                </div>
                                <div class="row">
                                    <div class="form-group col-md">
                                        <label>First Name:</label><span class="hg_required"></span><br>
                                        
                                        {{ reg_form.first_name }}
                                    </div>
                                    <div class="form-group col-md">
                                        <label>Last Name:</label><br>
                                        {{ reg_form.last_name }}
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="form-group col-md">
                                        <label> Currency:</label><span class="hg_required"></span><br>
                                        {{ reg_form.currency_id }}
                                    </div>
                                    <div class="form-group col-md">
                                        <label>Language:</label><span class="hg_required"></span><br>
                                        {{ reg_form.language_id }}
                                    </div>
                                    <div class="form-group col-md">
                                        <label> Time Zone:</label><span class="hg_required"></span><br>
                                        {{ reg_form.time_zone }}
                                    </div>

                                </div>
                            </div>
                        </div>
                        
                        <!--   contact information   -->
                        <div class="card card-shadow-1 mt-3">
                            
                            <div class="card-body">
                                <h5 class="card-title">Contact Information</h5>
                                <div class="row">
                                    <div class="form-group col-md">
                                        <label>E-mail:</label><span class="hg_required"></span><br>
                                        {{ reg_form.email }}
                                    </div>
                                    <div class="form-group col-md">
                                        <label>Phone Number:</label><span class="hg_required"></span><br>
                                        {{ reg_form.phone_num }}
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!--   Addtional information   -->
                        <div class="card card-shadow-1 mt-3">
                            
                            <div class="card-body">
                                <h5 class="card-title">Extended Data</h5>
                                <div class="row">
                                    <div class="form-group col-md">
                                        <label>Date Format:</label><span class="hg_required"></span><br>
                                        {{ reg_form.date_format }}
                                    </div>
                                    <div class="form-group col-md">
                                        <label>Decimal Notation:</label><span class="hg_required"></span><br>
                                        {{ reg_form.decimal_notation }}
                                    </div>
                                    <div class="form-group col-md hg-mt-2rem" >
                                        <label>SSO User:</label>&nbsp;&nbsp;<input type="checkbox" name="SSO User" value="SSO User">
                                    </div>
                                   
                                </div>
                            </div>
                        </div>
                        
                    </form>
                    <!--User register form-->

                </div>
            </div>

            <div id="org_data_tab" data-tab-content>
                <div class="mt-3">
                    <div class="card card-shadow-1 mt-3">
                        <div class="card-body">
                            <h3>Organizational data</h3>
                            <p>Organizational data.</p>   
                        </div>

                    </div>
                                     
                </div>
            </div>

            <div id="buisness_doc_tab" data-tab-content>
                <div class="mt-3">
                    <div class="card card-shadow-1 mt-3">
                        <div class="card-body">
                            <h3>Business Document</h3>
                            <p>Business Document.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="myModal">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="d-flex justify-content-end">
                <div>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
            </div>
            
                
            

            <!-- Modal body -->
            <div class="modal-body">
                Are you sure you want to reset the form?
            </div>

            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">No</button>
                <button type="button" class="btn btn-primary" id="user_form_reset">Yes</button>
            </div>

        </div>
    </div>
</div> 

<div class="hg_spacer2"> &nbsp; </div>


<script>

$(document).ready(function(){
  $("#user_form_reset").click(function(){
    $('#user_register_form')[0].reset();
    $('#myModal').modal('hide');
  });
  $('#nav_menu_items').remove();
  $("body").css("padding-top", "4rem");
  NavigateTabs(); // Custom function to switch tabs
});

// Get the element with id="defaultOpen" and click on it
document.getElementById("defaultOpen").click();

$('#user_registration_submit').click(function () {
    OpenLoaderPopup();
});

</script>

{% endblock %}
